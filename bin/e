#!/bin/bash

path="$1"

if [[ -z "$path" ]] \
  && [[ -f '.session.vim' ]]
then
  echo "Restoring session..."
  vim -S .session.vim
else
  if [[ -f "$path" ]]
  then
    owner="$(stat "$path" --printf=%G)"

    if [[ "$owner" != "$USER" ]]
    then
      sudo vim "$path"
    else
      vim "$path"
    fi
  else
    vim "$path"
  fi
fi
