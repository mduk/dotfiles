#!/usr/bin/env bash

set -x

declare profile='standalone'

if hdmi-connected
then
  case "$(hdmi-edid-hash)" in
    'c605c2d43c31e7090621159fe53d15d7') profile='work' ;;
    '7b47ec01863401062ed15a646e908526') profile='flat' ;;
    *) exit 1
  esac
fi

declare layout="$HOME/.screenlayout/$profile.sh"

if [[ -f "$layout" ]]
then source "$layout"
else exit 2
fi

sleep 1

i3-polybar
map-touchscreen
