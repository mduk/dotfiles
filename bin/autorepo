#!/bin/bash

repo-name-is-empty() {
  [[ -z "$REPO" ]]
}

repo-was-already-cloned() {
  [[ -d "$HOME/Development/$REPO/.git" ]]
}

clone-repo() {
  git \
    clone \
    "git@github.com:${REPO}.git" \
    "$HOME/Development/$REPO/"
}

fetch-repo() {
  git \
    --work-tree="$HOME/Development/$REPO/" \
    --git-dir="$HOME/Development/$REPO/.git/" \
    fetch
}

vendor-path() {
  echo "$HOME/Development/$(echo -n "$1" | cut -d/ -f1)"
}

while read REPO
do
  echo "$REPO"

  if repo-name-is-empty
  then continue
  fi

  if repo-was-already-cloned
  then fetch-repo
  else clone-repo
  fi | sed 's/^/   /'

done < <(cat $HOME/.config/autorepo)
